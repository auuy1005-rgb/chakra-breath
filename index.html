<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è„ˆè¼ªå‘¼å¸å†¥æƒ³å°å·¥å…·</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #0f172a;
      --card: #111827;
      --accent: #38bdf8;
      --text-main: #e5e7eb;
      --text-sub: #9ca3af;
      --border-soft: #1f2933;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 16px;
      background: radial-gradient(circle at top, #1e293b 0, #020617 60%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 480px;
      background: linear-gradient(145deg, #020617aa, #020617ee);
      border-radius: 20px;
      padding: 18px 16px 20px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.6);
      border: 1px solid #1f2937;
    }

    .title {
      font-size: 20px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .title span.emoji {
      font-size: 22px;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-sub);
      margin-bottom: 16px;
    }

    .chakra-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 14px;
    }

    .chakra-btn {
      flex: 1 1 calc(33.33% - 8px);
      min-width: 90px;
      border-radius: 999px;
      padding: 4px 8px;
      border: 1px solid var(--border-soft);
      background: #020617;
      color: var(--text-sub);
      font-size: 11px;
      display: flex;
      align-items: center;
      gap: 6px;
      justify-content: center;
      cursor: pointer;
      transition: all 0.15s ease-out;
    }

    .chakra-btn:hover {
      border-color: #4b5563;
    }

    .chakra-btn.active {
      color: #f9fafb;
      border-color: var(--accent);
      background: radial-gradient(circle at top, #0ea5e9 0, #020617 60%);
      box-shadow: 0 0 0 1px rgba(56,189,248,0.35);
    }

    .chakra-color-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      box-shadow: 0 0 8px rgba(255,255,255,0.45);
    }

    .chakra-info-card {
      margin-bottom: 18px;
      padding: 10px 10px 8px;
      border-radius: 14px;
      background: rgba(15,23,42,0.85);
      border: 1px solid #1f2937;
    }

    .chakra-info-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chakra-info-chip {
      font-size: 11px;
      color: #a5b4fc;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #4f46e5;
      background: rgba(30,64,175,0.3);
    }

    .chakra-info-text {
      font-size: 12px;
      color: var(--text-sub);
      line-height: 1.5;
    }

    .chakra-info-text span.label {
      color: #e5e7eb;
      font-weight: 500;
    }

    .breath-card {
      margin-bottom: 16px;
      padding: 12px 12px 14px;
      border-radius: 16px;
      background: radial-gradient(circle at top, #0b1120, #020617);
      border: 1px solid #1e293b;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .breath-circle-wrapper {
      width: 160px;
      height: 160px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .breath-circle {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: radial-gradient(circle, #020617 0, #020617 40%, #020617 70%);
      border: 1px solid rgba(148,163,184,0.6);
      box-shadow: 0 0 18px rgba(148,163,184,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #e5e7eb;
      font-size: 12px;
      text-align: center;
      padding: 8px;
      transition: transform 0.8s ease-in-out, box-shadow 0.8s ease-in-out, border-color 0.3s ease-out;
    }

    .breath-circle.inhale {
      transform: scale(1.25);
      box-shadow: 0 0 28px rgba(34,197,94,0.7);
      border-color: rgba(34,197,94,0.9);
    }

    .breath-circle.hold {
      transform: scale(1.05);
      box-shadow: 0 0 22px rgba(56,189,248,0.7);
      border-color: rgba(56,189,248,0.9);
    }

    .breath-circle.exhale {
      transform: scale(0.85);
      box-shadow: 0 0 24px rgba(248,113,113,0.7);
      border-color: rgba(248,113,113,0.9);
    }

    .breath-status {
      text-align: center;
      font-size: 13px;
    }

    .breath-status-main {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .breath-status-sub {
      font-size: 12px;
      color: var(--text-sub);
    }

    .breath-counts {
      display: flex;
      gap: 6px;
      font-size: 11px;
      color: #9ca3af;
      margin-top: 4px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .breath-counts span {
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: rgba(15,23,42,0.8);
    }

    .controls {
      display: flex;
      gap: 8px;
      margin-bottom: 6px;
    }

    .btn {
      flex: 1;
      padding: 8px 0;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text-main);
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: all 0.15s ease-out;
    }

    .btn-primary {
      background: linear-gradient(135deg, #0ea5e9, #22c55e);
      color: #0f172a;
      border-color: transparent;
      font-weight: 600;
    }

    .btn:active {
      transform: translateY(1px);
      box-shadow: none;
    }

    .btn-primary:disabled {
      opacity: 0.5;
    }

    .btn-secondary {
      color: #e5e7eb;
    }

    .hint {
      font-size: 11px;
      color: var(--text-sub);
      line-height: 1.5;
      margin-top: 4px;
    }

    .hint strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .footer {
      margin-top: 6px;
      font-size: 10px;
      color: #6b7280;
      text-align: center;
    }

    .preset-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 6px;
    }

    .preset-label {
      font-size: 11px;
      color: var(--text-sub);
    }

    .preset-select {
      flex: 1;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="title">
      <span class="emoji">ğŸŒ€</span>
      <span>è„ˆè¼ªå‘¼å¸å†¥æƒ³ã‚¿ã‚¤ãƒãƒ¼</span>
    </div>
    <div class="subtitle">
      é¸ä¸€å€‹è„ˆè¼ªï¼Œå°ˆå¿ƒè·Ÿè‘—å‘¼å¸ç¯€å¥ã€‚ä¸€è¼ªå¤§ç´„ 14 ç§’ï¼Œæ…¢æ…¢å¾ªç’°å°±å¥½ã€‚
    </div>

    <!-- è„ˆè¼ªé¸æ“‡ -->
    <div class="chakra-selector" id="chakraSelector">
      <!-- æŒ‰éˆ•ç”± JS å¡«å…¥ -->
    </div>

    <!-- è„ˆè¼ªè³‡è¨Š -->
    <div class="chakra-info-card">
      <div class="chakra-info-title">
        <span id="chakraName">æµ·åº•è¼ªï½œRoot</span>
        <span class="chakra-info-chip" id="chakraKey">å®‰å…¨æ„Ÿãƒ»æ ¹åŸº</span>
      </div>
      <div class="chakra-info-text">
        <div><span class="label">ä½ç½®ï¼š</span><span id="chakraArea">å°¾æ¤ã€éª¨ç›†åº•éƒ¨</span></div>
        <div><span class="label">ç·´ç¿’é‡é»ï¼š</span><span id="chakraHint">æ„Ÿå—èº«é«”é‡é‡ï¼Œè®“å‘¼å¸ç©©ç©©è½åœ¨éª¨ç›†èˆ‡é›™è…³ã€‚</span></div>
      </div>
    </div>

    <!-- å‘¼å¸å¡ç‰‡ -->
    <div class="breath-card">
      <div class="preset-row">
        <span class="preset-label">å‘¼å¸ç¯€å¥ï¼š</span>
        <select id="presetSelect" class="preset-select">
          <option value="4-4-6">æº«å’Œç‰ˆï½œå¸4ãƒ»åœ4ãƒ»å6</option>
          <option value="4-0-6">æµå‹•ç‰ˆï½œå¸4ãƒ»ä¸åœãƒ»å6</option>
          <option value="5-5-7">æ·±å±¤ç‰ˆï½œå¸5ãƒ»åœ5ãƒ»å7</option>
        </select>
      </div>

      <div class="breath-circle-wrapper">
        <div class="breath-circle" id="breathCircle">
          è·Ÿè‘—æç¤º<br>ç·©æ…¢å‘¼å¸
        </div>
      </div>

      <div class="breath-status">
        <div class="breath-status-main" id="phaseText">å¾…æ©Ÿä¸­</div>
        <div class="breath-status-sub" id="timerText">æŒ‰ä¸‹é–‹å§‹ï¼Œå¾ç¬¬ä¸€å£å¸æ°£é–‹å§‹ã€‚</div>
        <div class="breath-counts" id="breathCounts">
          <!-- ç”± JS å¡«å…¥ -->
        </div>
      </div>
    </div>

    <!-- æ§åˆ¶æŒ‰éˆ• -->
    <div class="controls">
      <button class="btn btn-primary" id="startBtn">
        â–¶ï¸ é–‹å§‹
      </button>
      <button class="btn btn-secondary" id="pauseBtn">
        â¸ æš«åœ
      </button>
      <button class="btn btn-secondary" id="resetBtn">
        ğŸ”„ é‡ç½®
      </button>
    </div>

    <div class="hint">
      å»ºè­°ï¼š<strong>çœ¼ç›å¾®é–‰</strong>ï¼Œæ³¨æ„åŠ›æ”¾åœ¨é¸å®šçš„è„ˆè¼ªä½ç½®ã€‚  
      ä¸ç”¨è¿½æ±‚å®Œç¾é…é€Ÿï¼Œ<strong>ä»¥èº«é«”èˆ’æœç‚ºä¸»</strong>ï¼Œè¦ºå¾—ç´¯å°±åœã€‚
    </div>

    <div class="footer">
      å€‹äººç·´ç¿’ç”¨å°å·¥å…·ï¼Œä¸èƒ½æ›¿ä»£ä»»ä½•é†«ç™‚å»ºè­°ã€‚å¦‚æœ‰èº«é«”ä¸é©ï¼Œè«‹å…ˆåœæ­¢ç·´ç¿’ã€‚
    </div>
  </div>

  <script>
    // --- è„ˆè¼ªè³‡æ–™ ---
    const chakras = [
      {
        id: 'root',
        name: 'æµ·åº•è¼ªï½œRoot',
        color: '#ef4444',
        area: 'å°¾æ¤ã€éª¨ç›†åº•éƒ¨ã€é›™è…³',
        key: 'å®‰å…¨æ„Ÿãƒ»æ ¹åŸº',
        hint: 'æ„Ÿå—èº«é«”é‡é‡ï¼Œå‘¼æ°£æ™‚è®“ç·Šç¹ƒæ…¢æ…¢æ²‰åˆ°åœ°é¢ã€‚'
      },
      {
        id: 'sacral',
        name: 'è‡è¼ªï½œSacral',
        color: '#f97316',
        area: 'è‚šè‡ä¸‹æ–¹ã€å°è…¹',
        key: 'æ„Ÿå—ãƒ»æ…¾æœ›',
        hint: 'å¸æ°£æ™‚è¦ºå¾—å°è…¹åƒæ°£çƒå¾®å¾®é¼“èµ·ï¼Œåæ°£æ™‚è‡ªç„¶å›æ”¶ã€‚'
      },
      {
        id: 'solar',
        name: 'å¤ªé™½ç¥ç¶“å¢ï½œSolar Plexus',
        color: '#eab308',
        area: 'è‚‹éª¨ä¸­é–“ã€èƒƒéƒ¨é™„è¿‘',
        key: 'è¡Œå‹•ãƒ»ç•Œç·š',
        hint: 'å¸æ°£æ™‚æ„Ÿè¦ºèƒ¸å£å‰æ–¹æ¼²æ»¿ï¼Œåæ°£æ™‚è®“å£“åŠ›æ…¢æ…¢æ•£é–‹ã€‚'
      },
      {
        id: 'heart',
        name: 'å¿ƒè¼ªï½œHeart',
        color: '#22c55e',
        area: 'èƒ¸å£ä¸­å¤®ã€è‚©è†€',
        key: 'é€£çµãƒ»åŒ…å®¹',
        hint: 'æ³¨æ„èƒ¸å£çš„èµ·ä¼ï¼Œå¸æ°£æ™‚èƒ¸è…”å±•é–‹ï¼Œåæ°£æ™‚è‚©è†€æ”¾é¬†ã€‚'
      },
      {
        id: 'throat',
        name: 'å–‰è¼ªï½œThroat',
        color: '#0ea5e9',
        area: 'å–‰åš¨ã€é ¸éƒ¨',
        key: 'è¡¨é”ãƒ»çœŸå¯¦',
        hint: 'è®“å‘¼å¸ç¶“éå–‰åš¨æ™‚ä¿æŒé †æš¢ï¼Œè§€å¯Ÿååš¥èˆ‡å¾®å¾®éœ‡å‹•ã€‚'
      },
      {
        id: 'third-eye',
        name: 'çœ‰å¿ƒè¼ªï½œThird Eye',
        color: '#6366f1',
        area: 'å…©çœ‰ä¹‹é–“ã€çœ¼å‘¨',
        key: 'å°ˆæ³¨ãƒ»æ´å¯Ÿ',
        hint: 'è¼•é¬†æ„Ÿå—å…©çœ‰ä¹‹é–“çš„å€åŸŸï¼Œè®“å‘¼å¸å¸¶ä¾†æ¸…æ˜çš„æ„Ÿè¦ºã€‚'
      },
      {
        id: 'crown',
        name: 'é ‚è¼ªï½œCrown',
        color: '#a855f7',
        area: 'é ­é ‚ã€é ­çš®',
        key: 'é€£çµãƒ»è¦ºå¯Ÿ',
        hint: 'æƒ³åƒå‘¼å¸åœ¨é ­é ‚ä¸Šæ–¹å½¢æˆä¸€å€‹å¯¬å»£çš„ç©ºé–“ï¼Œæ„è­˜è¼•è¼•åœåœ¨é‚£è£¡ã€‚'
      }
    ];

    // --- DOM å…ƒç´  ---
    const chakraSelectorEl = document.getElementById('chakraSelector');
    const chakraNameEl = document.getElementById('chakraName');
    const chakraAreaEl = document.getElementById('chakraArea');
    const chakraKeyEl = document.getElementById('chakraKey');
    const chakraHintEl = document.getElementById('chakraHint');

    const breathCircleEl = document.getElementById('breathCircle');
    const phaseTextEl = document.getElementById('phaseText');
    const timerTextEl = document.getElementById('timerText');
    const breathCountsEl = document.getElementById('breathCounts');

    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');
    const presetSelect = document.getElementById('presetSelect');

    // --- ç‹€æ…‹ ---
    let currentChakraId = 'root';
    let inhaleSeconds = 4;
    let holdSeconds = 4;
    let exhaleSeconds = 6;

    const PHASES = {
      INHALE: 'INHALE',
      HOLD: 'HOLD',
      EXHALE: 'EXHALE'
    };

    let isRunning = false;
    let timer = null;
    let currentPhase = PHASES.INHALE;
    let phaseRemaining = inhaleSeconds;
    let totalCycleSeconds = inhaleSeconds + holdSeconds + exhaleSeconds;
    let cycleCount = 0;

    // --- åˆå§‹åŒ–è„ˆè¼ªæŒ‰éˆ• ---
    function renderChakraButtons() {
      chakraSelectorEl.innerHTML = '';
      chakras.forEach(chakra => {
        const btn = document.createElement('button');
        btn.className = 'chakra-btn' + (chakra.id === currentChakraId ? ' active' : '');
        btn.dataset.id = chakra.id;

        const dot = document.createElement('span');
        dot.className = 'chakra-color-dot';
        dot.style.background = chakra.color;

        const label = document.createElement('span');
        label.textContent = chakra.name.split('ï½œ')[0]; // åªé¡¯ç¤ºä¸­æ–‡å

        btn.appendChild(dot);
        btn.appendChild(label);

        btn.addEventListener('click', () => {
          currentChakraId = chakra.id;
          updateChakraInfo();
          setActiveButton(chakra.id);
        });

        chakraSelectorEl.appendChild(btn);
      });
    }

    function setActiveButton(id) {
      const buttons = chakraSelectorEl.querySelectorAll('.chakra-btn');
      buttons.forEach(btn => {
        btn.classList.toggle('active', btn.dataset.id === id);
      });
    }

    // --- æ›´æ–°è„ˆè¼ªè³‡è¨Š ---
    function updateChakraInfo() {
      const chakra = chakras.find(c => c.id === currentChakraId);
      if (!chakra) return;
      chakraNameEl.textContent = chakra.name;
      chakraAreaEl.textContent = chakra.area;
      chakraKeyEl.textContent = chakra.key;
      chakraHintEl.textContent = chakra.hint;

      // æ›´æ–°å‘¼å¸åœˆé‚Šæ¡†é¡è‰²å¾®èª¿
      breathCircleEl.style.borderColor = chakra.color;
      breathCircleEl.style.boxShadow = `0 0 18px ${chakra.color}77`;
    }

    // --- æ›´æ–°ç¯€å¥é¡¯ç¤º ---
    function renderBreathCounts() {
      breathCountsEl.innerHTML = '';
      const span1 = document.createElement('span');
      span1.textContent = `å¸ ${inhaleSeconds}s`;
      const span2 = document.createElement('span');
      if (holdSeconds > 0) {
        span2.textContent = `åœ ${holdSeconds}s`;
      } else {
        span2.textContent = `ä¸­é€”ä¸åœ`;
      }
      const span3 = document.createElement('span');
      span3.textContent = `å ${exhaleSeconds}s`;

      breathCountsEl.appendChild(span1);
      breathCountsEl.appendChild(span2);
      breathCountsEl.appendChild(span3);
    }

    // --- è§£æ preset ---
    function applyPreset(value) {
      // æ ¼å¼é¡ä¼¼ "4-4-6"
      const [i, h, e] = value.split('-').map(v => parseInt(v, 10));
      inhaleSeconds = i || 4;
      holdSeconds = h || 0;
      exhaleSeconds = e || 6;
      totalCycleSeconds = inhaleSeconds + holdSeconds + exhaleSeconds;

      resetSession(false); // åªé‡ç½®è¨ˆæ™‚ï¼Œä¸æ¸…ç©ºè„ˆè¼ª
      renderBreathCounts();
    }

    // --- å‘¼å¸æµç¨‹ ---
    function startSession() {
      if (isRunning) return;
      isRunning = true;
      startBtn.disabled = true;

      if (!timer) {
        // åˆæ¬¡æˆ–é‡ç½®å¾Œï¼Œå¾é ­é–‹å§‹
        currentPhase = PHASES.INHALE;
        phaseRemaining = inhaleSeconds;
      }

      updatePhaseUI();

      timer = setInterval(() => {
        if (phaseRemaining <= 0) {
          switchPhase();
        } else {
          phaseRemaining -= 1;
          updateTimerText();
        }
      }, 1000);
    }

    function pauseSession() {
      isRunning = false;
      startBtn.disabled = false;
      if (timer) {
        clearInterval(timer);
        timer = null;
      }
      phaseTextEl.textContent = 'å·²æš«åœ';
      timerTextEl.textContent = 'éš¨æ™‚å¯ä»¥å†æŒ‰é–‹å§‹ï¼Œå»¶çºŒå‰›æ‰çš„ç¯€å¥ã€‚';
      breathCircleEl.classList.remove('inhale', 'hold', 'exhale');
    }

    function resetSession(clearChakra = false) {
      isRunning = false;
      startBtn.disabled = false;
      if (timer) {
        clearInterval(timer);
        timer = null;
      }
      currentPhase = PHASES.INHALE;
      phaseRemaining = inhaleSeconds;
      cycleCount = 0;
      phaseTextEl.textContent = 'å¾…æ©Ÿä¸­';
      timerTextEl.textContent = 'æŒ‰ä¸‹é–‹å§‹ï¼Œå¾ç¬¬ä¸€å£å¸æ°£é–‹å§‹ã€‚';
      breathCircleEl.classList.remove('inhale', 'hold', 'exhale');
      breathCircleEl.textContent = 'è·Ÿè‘—æç¤º\nç·©æ…¢å‘¼å¸';

      if (clearChakra) {
        currentChakraId = 'root';
        setActiveButton('root');
        updateChakraInfo();
      }
    }

    function switchPhase() {
      if (currentPhase === PHASES.INHALE) {
        if (holdSeconds > 0) {
          currentPhase = PHASES.HOLD;
          phaseRemaining = holdSeconds;
        } else {
          currentPhase = PHASES.EXHALE;
          phaseRemaining = exhaleSeconds;
        }
      } else if (currentPhase === PHASES.HOLD) {
        currentPhase = PHASES.EXHALE;
        phaseRemaining = exhaleSeconds;
      } else if (currentPhase === PHASES.EXHALE) {
        currentPhase = PHASES.INHALE;
        phaseRemaining = inhaleSeconds;
        cycleCount += 1;
      }
      updatePhaseUI();
    }

    function updatePhaseUI() {
      breathCircleEl.classList.remove('inhale', 'hold', 'exhale');

      if (currentPhase === PHASES.INHALE) {
        phaseTextEl.textContent = 'å¸æ°£';
        breathCircleEl.classList.add('inhale');
        breathCircleEl.textContent = 'é¼»å­å¸æ°£\nç·©æ…¢å¸æ»¿';
      } else if (currentPhase === PHASES.HOLD) {
        phaseTextEl.textContent = 'åœç•™';
        breathCircleEl.classList.add('hold');
        breathCircleEl.textContent = 'ä¿æŒä¸å‹•\næ³¨æ„æ„Ÿå—';
      } else if (currentPhase === PHASES.EXHALE) {
        phaseTextEl.textContent = 'åæ°£';
        breathCircleEl.classList.add('exhale');
        breathCircleEl.textContent = 'å˜´å·´åæ°£\næ…¢æ…¢æ”¾æ‰';
      }

      updateTimerText();
    }

    function updateTimerText() {
      timerTextEl.textContent = `æœ¬éšæ®µå‰©é¤˜ ${phaseRemaining} ç§’ï½œå·²å®Œæˆç´„ ${cycleCount} è¼ª`;
    }

    // --- äº‹ä»¶ç¶å®š ---
    startBtn.addEventListener('click', startSession);
    pauseBtn.addEventListener('click', pauseSession);
    resetBtn.addEventListener('click', () => resetSession(false));
    presetSelect.addEventListener('change', (e) => {
      applyPreset(e.target.value);
    });

    // --- åˆå§‹åŒ– ---
    function init() {
      renderChakraButtons();
      updateChakraInfo();
      renderBreathCounts();
      applyPreset(presetSelect.value);
    }

    init();
  </script>
</body>
</html>
